{"version":3,"file":"review-service.js","sources":["../../node_modules/rollup-plugin-node-globals/src/global.js","../../node_modules/process-es6/browser.js","inputJS/Config/configVar.js","inputJS/Config/config.js","inputJS/review-service.js"],"sourcesContent":["export default (typeof global !== \"undefined\" ? global :\n            typeof self !== \"undefined\" ? self :\n            typeof window !== \"undefined\" ? window : {});\n","// shim for using process in browser\n// based off https://github.com/defunctzombie/node-process/blob/master/browser.js\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\nvar cachedSetTimeout = defaultSetTimout;\nvar cachedClearTimeout = defaultClearTimeout;\nif (typeof global.setTimeout === 'function') {\n    cachedSetTimeout = setTimeout;\n}\nif (typeof global.clearTimeout === 'function') {\n    cachedClearTimeout = clearTimeout;\n}\n\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\nexport function nextTick(fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n}\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nexport var title = 'browser';\nexport var platform = 'browser';\nexport var browser = true;\nexport var env = {};\nexport var argv = [];\nexport var version = ''; // empty string to avoid regexp issues\nexport var versions = {};\nexport var release = {};\nexport var config = {};\n\nfunction noop() {}\n\nexport var on = noop;\nexport var addListener = noop;\nexport var once = noop;\nexport var off = noop;\nexport var removeListener = noop;\nexport var removeAllListeners = noop;\nexport var emit = noop;\n\nexport function binding(name) {\n    throw new Error('process.binding is not supported');\n}\n\nexport function cwd () { return '/' }\nexport function chdir (dir) {\n    throw new Error('process.chdir is not supported');\n};\nexport function umask() { return 0; }\n\n// from https://github.com/kumavis/browser-process-hrtime/blob/master/index.js\nvar performance = global.performance || {}\nvar performanceNow =\n  performance.now        ||\n  performance.mozNow     ||\n  performance.msNow      ||\n  performance.oNow       ||\n  performance.webkitNow  ||\n  function(){ return (new Date()).getTime() }\n\n// generate timestamp or delta\n// see http://nodejs.org/api/process.html#process_process_hrtime\nexport function hrtime(previousTimestamp){\n  var clocktime = performanceNow.call(performance)*1e-3\n  var seconds = Math.floor(clocktime)\n  var nanoseconds = Math.floor((clocktime%1)*1e9)\n  if (previousTimestamp) {\n    seconds = seconds - previousTimestamp[0]\n    nanoseconds = nanoseconds - previousTimestamp[1]\n    if (nanoseconds<0) {\n      seconds--\n      nanoseconds += 1e9\n    }\n  }\n  return [seconds,nanoseconds]\n}\n\nvar startTime = new Date();\nexport function uptime() {\n  var currentTime = new Date();\n  var dif = currentTime - startTime;\n  return dif / 1000;\n}\n\nexport default {\n  nextTick: nextTick,\n  title: title,\n  browser: browser,\n  env: env,\n  argv: argv,\n  version: version,\n  versions: versions,\n  on: on,\n  addListener: addListener,\n  once: once,\n  off: off,\n  removeListener: removeListener,\n  removeAllListeners: removeAllListeners,\n  emit: emit,\n  binding: binding,\n  cwd: cwd,\n  chdir: chdir,\n  umask: umask,\n  hrtime: hrtime,\n  platform: platform,\n  release: release,\n  config: config,\n  uptime: uptime\n};\n","export const configVar = {\r\n  development: {\r\n    DOCUMENT_END_POINT: 'https://data-intel-documents-dev.herokuapp.com/v1',\r\n  },\r\n};\r\n","import { configVar } from './configVar';\r\nconst env = process.env.NODE_ENV || 'development';\r\n\r\nconst envConfig = () => {\r\n  if (env === 'development') {\r\n    const envConfig = configVar[env];\r\n\r\n    Object.keys(envConfig).forEach(key => {\r\n      process.env[key] = envConfig[key];\r\n    });\r\n  }\r\n};\r\n\r\nexport default envConfig;\r\n","import envConfiguration from './Config/config';\r\nenvConfiguration();\r\n\r\n/**\r\n *Function to normalize the payload receive in the review request call and the creation of the analyze text.\r\n *\r\n * @param {*} reviewResult\r\n */\r\nfunction renderAnalyzeReview(reviewResult) {\r\n  const divUpperFeedback = document.getElementById('upper-part-feedback');\r\n\r\n  // To clean the div;\r\n  const range = document.createRange();\r\n  range.selectNodeContents(divUpperFeedback);\r\n  range.deleteContents();\r\n\r\n  let aspectSerializer = [];\r\n\r\n  // I don't think this cart is beautiful\r\n  reviewResult.sentiment_analysis.sentence_list.forEach(sentence_list => {\r\n    // console.log('sentence_list :', sentence_list);\r\n\r\n    sentence_list.segment_list.forEach(segment_list => {\r\n      // console.log('segment_list :', segment_list);\r\n\r\n      segment_list.polarity_term_list.forEach(polarity_term_list => {\r\n        // console.log('polarity_term_list :', polarity_term_list);\r\n        let typeOfAspect = 'NEU';\r\n\r\n        if (\r\n          polarity_term_list.score_tag === 'P' ||\r\n          polarity_term_list.score_tag === 'P+'\r\n        ) {\r\n          typeOfAspect = 'positive';\r\n        } else if (\r\n          polarity_term_list.score_tag === 'N' ||\r\n          polarity_term_list.score_tag === 'N+'\r\n        ) {\r\n          typeOfAspect = 'negative';\r\n        }\r\n\r\n        aspectSerializer.push({\r\n          term: reviewResult.text.slice(\r\n            parseInt(polarity_term_list.inip),\r\n            parseInt(polarity_term_list.endp) + 1,\r\n          ),\r\n          typeOfAspect,\r\n        });\r\n\r\n        if (polarity_term_list.sentimented_concept_list) {\r\n          polarity_term_list.sentimented_concept_list.forEach(\r\n            sentimented_concept_list => {\r\n              aspectSerializer.push({\r\n                term: sentimented_concept_list.variant,\r\n                typeOfAspect: 'aspect',\r\n              });\r\n            },\r\n          );\r\n        }\r\n      });\r\n\r\n      if (segment_list.sentimented_concept_list) {\r\n        segment_list.sentimented_concept_list.forEach(\r\n          sentimented_concept_list => {\r\n            aspectSerializer.push({\r\n              term: sentimented_concept_list.variant,\r\n              typeOfAspect: 'aspect',\r\n            });\r\n          },\r\n        );\r\n      }\r\n\r\n      if (segment_list.sentimented_entity_list) {\r\n        segment_list.sentimented_entity_list.forEach(\r\n          sentimented_entity_list => {\r\n            aspectSerializer.push({\r\n              term: sentimented_entity_list.form,\r\n              typeOfAspect: 'aspect',\r\n            });\r\n          },\r\n        );\r\n      }\r\n    });\r\n  });\r\n\r\n  console.log('aspectSerializer', aspectSerializer);\r\n\r\n  reviewResult.text.split(' ').forEach(element => {\r\n    const newP = document.createElement('p');\r\n    const text = document.createTextNode(element);\r\n    newP.appendChild(text);\r\n\r\n    aspectSerializer.forEach(serializeAspect => {\r\n      const serializeTerm = serializeAspect.term.toUpperCase();\r\n      const reviewTextPart = element.replace(/[.,;_?!%$#]/g, '').toUpperCase();\r\n\r\n      if (serializeTerm === reviewTextPart && serializeAspect.term !== 'NEU') {\r\n        newP.classList.add(serializeAspect.typeOfAspect);\r\n      }\r\n    });\r\n\r\n    divUpperFeedback.appendChild(newP);\r\n  });\r\n}\r\n\r\n/**\r\n * Function to listen to submissions of example reviews\r\n */\r\nfunction analyzeDataSubmitListener() {\r\n  document\r\n    .getElementById('analyze-form')\r\n    .addEventListener('submit', function(event) {\r\n      event.preventDefault();\r\n\r\n      const textArea = event.target[0];\r\n\r\n      if (textArea.value === '') {\r\n        textArea.classList.add('animated', 'shake');\r\n        setTimeout(() => {\r\n          textArea.classList.remove('animated', 'shake');\r\n        }, 1000);\r\n        return;\r\n      }\r\n\r\n      const postParams = Object.assign(\r\n        {},\r\n        {\r\n          text: textArea.value,\r\n        },\r\n      );\r\n\r\n      axios\r\n        .post(`${process.env.DOCUMENT_END_POINT}/documents`, postParams)\r\n        .then(function(response) {\r\n          renderAnalyzeReview(response.data);\r\n          document.getElementById('feedback-text').classList.remove('hidden');\r\n          document\r\n            .getElementById('feedback-text')\r\n            .classList.add('animated', 'fadeInUp');\r\n          textArea.value = '';\r\n        })\r\n        .catch(function(error) {\r\n          throw new Error(error);\r\n        });\r\n    });\r\n}\r\n\r\nanalyzeDataSubmitListener();\r\n"],"names":["global","self","window","defaultSetTimout","Error","defaultClearTimeout","cachedSetTimeout","cachedClearTimeout","runTimeout","fun","setTimeout","e","call","this","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","length","concat","drainQueue","timeout","len","run","marker","runClearTimeout","Item","array","prototype","apply","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","performance","performanceNow","now","mozNow","msNow","oNow","webkitNow","Date","getTime","startTime","nextTick","args","Array","arguments","i","push","title","browser","env","argv","version","versions","binding","name","cwd","chdir","dir","umask","hrtime","previousTimestamp","clocktime","seconds","Math","floor","nanoseconds","platform","release","config","uptime","configVar","development","DOCUMENT_END_POINT","process","NODE_ENV","envConfig","Object","keys","forEach","key","document","getElementById","addEventListener","event","preventDefault","textArea","target","value","classList","add","remove","postParams","assign","text","axios","post","then","response","reviewResult","divUpperFeedback","range","createRange","selectNodeContents","deleteContents","aspectSerializer","sentiment_analysis","sentence_list","segment_list","polarity_term_list","typeOfAspect","score_tag","term","slice","parseInt","inip","endp","sentimented_concept_list","variant","sentimented_entity_list","form","console","log","split","element","newP","createElement","createTextNode","appendChild","serializeAspect","toUpperCase","replace","renderAnalyzeReview","data","catch","error"],"mappings":"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"}